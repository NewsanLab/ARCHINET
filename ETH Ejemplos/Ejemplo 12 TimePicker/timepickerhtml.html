<!DOCTYPE html>
<html>
<head>
  <title>Time Picker Auto</title>
</head>
<body style="font-family: sans-serif; text-align: center;">
  <h2>time picker</h2>
  <input type="datetime-local" id="datetime" disabled />
  <p id="status">Esperando env√≠o...</p>

  <script>
    function actualizarHora() {
      const ahora = new Date();
      // Formato tipo "2025-04-24T13:05"
      const isoLocal = ahora.toISOString().slice(0,16);
      document.getElementById("datetime").value = isoLocal;

      fetch("/hora", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ datetime: isoLocal })
      }).then(() => {
        document.getElementById("status").innerText = "Enviado: " + isoLocal;
      }).catch(() => {
        document.getElementById("status").innerText = "Error al enviar";
      });
    }

    // Enviar al cargar y luego cada minuto (60000 ms)
    actualizarHora();
    setInterval(actualizarHora, 60000);
  </script>
</body>
</html>

